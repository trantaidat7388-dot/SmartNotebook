<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.SVGPath?>

<HBox xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dat.notebook.controller.TrashController" styleClass="main-root" stylesheets="@../css/soft-peach.css" minWidth="900" minHeight="550">

    <!-- ==================== LEFT SIDEBAR (1/5) ==================== -->
    <VBox styleClass="sidebar" minWidth="160" maxWidth="220">
        <!-- Header -->
        <VBox styleClass="sidebar-header" spacing="5">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <SVGPath content="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" style="-fx-fill: white;" scaleX="1.5" scaleY="1.5"/>
                <VBox>
                    <Label text="Thùng rác" styleClass="sidebar-logo"/>
                    <Label text="Deleted Notes" styleClass="sidebar-version"/>
                </VBox>
            </HBox>
        </VBox>

        <!-- Quick Actions -->
        <Label text="HÀNH ĐỘNG" styleClass="sidebar-section-title"/>

        <VBox spacing="8">
            <Button fx:id="btnBack" text="← Quay lại" styleClass="sidebar-btn, sidebar-btn-active" onAction="#handleBack" maxWidth="Infinity"/>

            <Button fx:id="btnEmptyTrash" styleClass="sidebar-btn" onAction="#handleEmptyTrash" maxWidth="Infinity">
                <graphic>
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <SVGPath content="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" style="-fx-fill: rgba(255,255,255,0.9);" scaleX="1.1" scaleY="1.1"/>
                        <Label text="Xóa tất cả" style="-fx-text-fill: inherit;"/>
                    </HBox>
                </graphic>
            </Button>
        </VBox>

        <!-- Spacer -->
        <Region VBox.vgrow="ALWAYS"/>

        <!-- Info -->
        <VBox styleClass="sidebar-user-info" spacing="8">
            <Label text="⚠️ Chú ý" style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <Label text="Ghi chú đã xóa vĩnh viễn không thể khôi phục" wrapText="true" style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 11px;"/>
        </VBox>
    </VBox>

    <!-- ==================== CENTER - DELETED NOTES LIST (1/5) ==================== -->
    <VBox styleClass="content-area" minWidth="200" maxWidth="280">
        <!-- Header -->
        <VBox spacing="4" style="-fx-padding: 0 0 15 0;">
            <Label text="Ghi chú đã xóa" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2d3748;"/>
            <Label fx:id="lblArchivedCount" text="0 ghi chú" style="-fx-font-size: 13px; -fx-text-fill: #64748b;"/>
        </VBox>

        <!-- Deleted Notes List -->
        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox fx:id="vboxArchivedNotes" spacing="10" style="-fx-padding: 10 5;">
                <!-- Notes will be loaded dynamically -->
            </VBox>
        </ScrollPane>
    </VBox>

    <!-- ==================== RIGHT - NOTE PREVIEW (3/5) ==================== -->
    <VBox minWidth="450" styleClass="content-area" style="-fx-border-color: #e2e8f0; -fx-border-width: 0 0 0 1;">
        <HBox.hgrow>ALWAYS</HBox.hgrow>

        <!-- Preview Header -->
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 15 0;">
            <VBox HBox.hgrow="ALWAYS">
                <Label fx:id="lblNoteTitle" text="Chọn ghi chú để xem" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2d3748;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label fx:id="lblArchivedDate" text="" style="-fx-text-fill: #64748b; -fx-font-size: 12px;"/>
                </HBox>
            </VBox>

            <!-- Action Buttons -->
            <HBox spacing="8" alignment="CENTER">
                <Button fx:id="btnRestore" text="↶ Khôi phục" styleClass="toolbar-btn-lg" onAction="#handleRestore" disable="true"/>
                <Button fx:id="btnDeletePermanently" text="✕ Xóa vĩnh viễn" styleClass="toolbar-btn-lg, toolbar-btn-danger" onAction="#handleDeletePermanently" disable="true"/>
            </HBox>
        </HBox>

        <!-- Note Metadata -->
        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 0 0 15 0;">
            <Label text="Trạng thái:" style="-fx-font-weight: bold; -fx-text-fill: #374151;"/>
            <Label fx:id="lblNoteStatus" text="-" styleClass="status-badge"/>
        </HBox>

        <!-- Note Content Preview -->
        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" style="-fx-background-color: #f9fafb; -fx-border-color: #e5e7eb; -fx-border-radius: 8;">
            <VBox spacing="10" style="-fx-padding: 15;">
                <Label fx:id="lblNoteContent" text="Nội dung sẽ hiển thị ở đây..." wrapText="true" style="-fx-text-fill: #64748b; -fx-font-size: 14px;"/>
            </VBox>
        </ScrollPane>

        <!-- Warning Message -->
        <HBox style="-fx-background-color: #fef3c7; -fx-border-color: #fbbf24; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12; -fx-spacing: 10; -fx-alignment: CENTER_LEFT; -fx-margin: 15 0 0 0;">
            <Label text="⚠️ Lưu ý: Ghi chú bị xóa vĩnh viễn không thể khôi phục!" wrapText="true" style="-fx-text-fill: #92400e; -fx-font-size: 12px;"/>
        </HBox>
    </VBox>
</HBox>
