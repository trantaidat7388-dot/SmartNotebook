<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.text.*?>

<HBox xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dat.notebook.controller.LoginController" prefWidth="1100" prefHeight="750" styleClass="login-root" stylesheets="@../css/soft-peach.css">

    <!-- ========== LEFT PANEL: GRADIENT BACKGROUND WITH SLOGAN ========== -->
    <VBox alignment="CENTER" spacing="25" prefWidth="450" style="-fx-padding: 60;">

        <!-- Logo Icon -->
        <Label text="ðŸ““" style="-fx-font-size: 120px;">
            <effect>
                <DropShadow color="rgba(0,0,0,0.3)" radius="20" offsetY="8"/>
            </effect>
        </Label>

        <!-- App Name -->
        <VBox alignment="CENTER" spacing="10">
            <Label text="Smart Notebook" styleClass="login-app-name">
                <effect>
                    <DropShadow color="rgba(0,0,0,0.25)" radius="12" offsetY="3"/>
                </effect>
            </Label>

            <!-- Slogan -->
            <Label text="Write ideas." styleClass="login-slogan"/>
            <Label text="Save memories." styleClass="login-slogan"/>
        </VBox>

        <!-- Decorative Icons -->
        <HBox alignment="CENTER" spacing="15" style="-fx-padding: 30 0 0 0;">
            <Label text="âœ¨" style="-fx-font-size: 30px;"/>
            <Label text="ðŸ“" style="-fx-font-size: 30px;"/>
            <Label text="ðŸ’¡" style="-fx-font-size: 30px;"/>
            <Label text="ðŸŽ¯" style="-fx-font-size: 30px;"/>
        </HBox>

        <!-- Version -->
        <Region VBox.vgrow="ALWAYS"/>
        <Label text="Version 2.11 - True Orange" styleClass="login-version"/>
    </VBox>

    <!-- ========== RIGHT PANEL: LOGIN/REGISTER FORM ========== -->
    <StackPane prefWidth="650" style="-fx-background-color: #FFF9F0;">

        <!-- LOGIN FORM (Default Visible) -->
        <VBox fx:id="loginFormPanel" alignment="CENTER" spacing="20" style="-fx-padding: 50;">

            <VBox alignment="CENTER" spacing="8">
                <Label text="Welcome Back!" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #3E2723;"/>
                <Label text="ÄÄƒng nháº­p Ä‘á»ƒ tiáº¿p tá»¥c" style="-fx-font-size: 15px; -fx-text-fill: #4E342E;"/>
            </VBox>

            <!-- Error Box -->
            <HBox fx:id="errorBox" visible="false" managed="false" alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #fed7d7; -fx-background-radius: 12px; -fx-padding: 12 20;">
                <Label text="âš ï¸" style="-fx-font-size: 16px;"/>
                <Label fx:id="errorLabel" text="" style="-fx-text-fill: #c53030; -fx-font-size: 14px;"/>
            </HBox>

            <!-- Username Field -->
            <VBox spacing="8" prefWidth="380">
                <Label text="TÃªn Ä‘Äƒng nháº­p" style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: white; -fx-background-radius: 12px; -fx-border-color: #FFCC80; -fx-border-radius: 12px; -fx-border-width: 2px; -fx-padding: 5 15;">
                    <Label text="ðŸ‘¤" style="-fx-font-size: 20px;"/>
                    <TextField fx:id="usernameField" promptText="Nháº­p tÃªn Ä‘Äƒng nháº­p" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 15px; -fx-text-fill: #3E2723;" HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>

            <!-- Password Field -->
            <VBox spacing="8" prefWidth="380">
                <Label text="Máº­t kháº©u" style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: white; -fx-background-radius: 12px; -fx-border-color: #FFCC80; -fx-border-radius: 12px; -fx-border-width: 2px; -fx-padding: 5 15;">
                    <Label text="ðŸ”’" style="-fx-font-size: 20px;"/>
                    <PasswordField fx:id="passwordField" promptText="Nháº­p máº­t kháº©u" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 15px; -fx-text-fill: #3E2723;" HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>

            <HBox alignment="CENTER" spacing="120" prefWidth="380">
                <CheckBox text="Ghi nhá»› Ä‘Äƒng nháº­p" style="-fx-text-fill: #4E342E; -fx-font-size: 13px;"/>
                <Hyperlink text="QuÃªn máº­t kháº©u?" style="-fx-text-fill: #F57C00; -fx-font-size: 13px;" onAction="#handleForgotPassword"/>
            </HBox>

            <Button text="ÄÄƒng nháº­p" onAction="#handleLogin" prefWidth="380" prefHeight="50" styleClass="btn-primary"/>

            <!-- Guest Login Button -->
            <Button text="ðŸŽ­ ÄÄƒng nháº­p cháº¿ Ä‘á»™ Demo" onAction="#handleGuestLogin" prefWidth="380" prefHeight="45" style="-fx-background-color: white; -fx-text-fill: #F57C00; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 12px; -fx-border-color: #FFCC80; -fx-border-radius: 12px; -fx-border-width: 2px; -fx-cursor: hand;"/>

            <HBox alignment="CENTER" spacing="5">
                <Label text="ChÆ°a cÃ³ tÃ i khoáº£n?" style="-fx-text-fill: #4E342E; -fx-font-size: 14px;"/>
                <Hyperlink text="ÄÄƒng kÃ½ ngay" style="-fx-text-fill: #F57C00; -fx-font-size: 14px; -fx-font-weight: bold;" onAction="#handleShowRegister"/>
            </HBox>
        </VBox>

        <!-- REGISTER FORM (Initially Hidden) -->
        <ScrollPane fx:id="registerScrollPane" visible="false" managed="false" fitToWidth="true" style="-fx-background-color: transparent; -fx-background: #FFF9F0;">
            <VBox fx:id="registerFormPanel" alignment="CENTER" spacing="12" style="-fx-padding: 30 50;">

                <!-- Header -->
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Create Account" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #3E2723;"/>
                    <Label text="Táº¡o tÃ i khoáº£n má»›i" style="-fx-font-size: 14px; -fx-text-fill: #4E342E;"/>
                </VBox>

                <!-- Error/Success Boxes for Register -->
                <HBox fx:id="registerErrorBox" visible="false" managed="false" alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #fed7d7; -fx-background-radius: 10px; -fx-padding: 10 15;">
                    <Label text="âš ï¸" style="-fx-font-size: 14px;"/>
                    <Label fx:id="registerErrorLabel" text="" wrapText="true" maxWidth="320" style="-fx-text-fill: #c53030; -fx-font-size: 13px;"/>
                </HBox>

                <HBox fx:id="registerSuccessBox" visible="false" managed="false" alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #c6f6d5; -fx-background-radius: 10px; -fx-padding: 10 15;">
                    <Label text="âœ…" style="-fx-font-size: 14px;"/>
                    <Label fx:id="registerSuccessLabel" text="" wrapText="true" maxWidth="320" style="-fx-text-fill: #22543d; -fx-font-size: 13px;"/>
                </HBox>

                <!-- Register Fields -->
                <VBox spacing="5" prefWidth="400">
                    <Label text="TÃªn Ä‘Äƒng nháº­p" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                    <TextField fx:id="regUsernameField" promptText="TÃªn Ä‘Äƒng nháº­p (Ã­t nháº¥t 3 kÃ½ tá»±)" style="-fx-background-color: white; -fx-background-radius: 8px; -fx-border-color: #FFCC80; -fx-border-radius: 8px; -fx-border-width: 2px; -fx-padding: 10 12; -fx-font-size: 14px;"/>
                </VBox>

                <VBox spacing="5" prefWidth="400">
                    <Label text="Email" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                    <TextField fx:id="regEmailField" promptText="email@example.com" style="-fx-background-color: white; -fx-background-radius: 8px; -fx-border-color: #FFCC80; -fx-border-radius: 8px; -fx-border-width: 2px; -fx-padding: 10 12; -fx-font-size: 14px;"/>
                </VBox>

                <VBox spacing="5" prefWidth="400">
                    <Label text="Máº­t kháº©u" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                    <PasswordField fx:id="regPasswordField" promptText="Máº­t kháº©u (Ã­t nháº¥t 6 kÃ½ tá»±)" style="-fx-background-color: white; -fx-background-radius: 8px; -fx-border-color: #FFCC80; -fx-border-radius: 8px; -fx-border-width: 2px; -fx-padding: 10 12; -fx-font-size: 14px;"/>
                </VBox>

                <VBox spacing="5" prefWidth="400">
                    <Label text="XÃ¡c nháº­n máº­t kháº©u" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #3E2723;"/>
                    <PasswordField fx:id="regConfirmPasswordField" promptText="Nháº­p láº¡i máº­t kháº©u" style="-fx-background-color: white; -fx-background-radius: 8px; -fx-border-color: #FFCC80; -fx-border-radius: 8px; -fx-border-width: 2px; -fx-padding: 10 12; -fx-font-size: 14px;"/>
                </VBox>

                <!-- Register Button -->
                <Button text="ÄÄƒng kÃ½" onAction="#handleRegister" prefWidth="400" prefHeight="45" styleClass="btn-primary"/>

                <!-- Back to Login Link -->
                <HBox alignment="CENTER" spacing="5" style="-fx-padding: 5 0 0 0;">
                    <Label text="ÄÃ£ cÃ³ tÃ i khoáº£n?" style="-fx-text-fill: #4E342E; -fx-font-size: 14px;"/>
                    <Hyperlink text="ÄÄƒng nháº­p" style="-fx-text-fill: #F57C00; -fx-font-size: 14px; -fx-font-weight: bold;" onAction="#handleShowLogin"/>
                </HBox>
            </VBox>
        </ScrollPane>

    </StackPane>

</HBox>
