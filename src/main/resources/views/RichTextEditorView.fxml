<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.HTMLEditor?>
<?import javafx.geometry.Insets?>

<!--
    RichTextEditorView.fxml
    View chÃ­nh cho Rich Text Editor vá»›i TabPane
    Má»—i note má»Ÿ trong má»™t tab riÃªng
    
    Features:
    - TabPane Ä‘á»ƒ quáº£n lÃ½ nhiá»u notes cÃ¹ng lÃºc
    - HTMLEditor cho Rich Text Editing
    - Toolbar vá»›i formatting options
    - Auto-save indicator
    - Version history button
-->

<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.dat.notebook.controller.RichTextEditorController"
            styleClass="editor-root"
            stylesheets="@../css/fresh-candy.css"
            prefWidth="1000" prefHeight="650"
            minWidth="800" minHeight="500">
    
    <!-- Top Toolbar -->
    <top>
        <VBox styleClass="editor-toolbar-container">
            <!-- Main Toolbar -->
            <HBox styleClass="editor-main-toolbar" alignment="CENTER_LEFT" spacing="10">
                <padding>
                    <Insets top="10" bottom="10" left="15" right="15"/>
                </padding>
                
                <!-- Title -->
                <Label text="ðŸ“ Rich Text Editor" 
                       style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Quick Actions -->
                <HBox spacing="8">
                    <Button fx:id="btnNewNote" text="+ Ghi chÃº má»›i" 
                            styleClass="btn-primary"
                            onAction="#handleNewNote"
                            style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 16;"/>
                    
                    <Separator orientation="VERTICAL"/>
                    
                    <Button fx:id="btnSaveNote" text="ðŸ’¾ LÆ°u" 
                            styleClass="toolbar-btn"
                            onAction="#handleSaveNote"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 16;"/>
                    
                    <Button fx:id="btnVersionHistory" text="ðŸ• Lá»‹ch sá»­" 
                            styleClass="toolbar-btn"
                            onAction="#handleShowVersionHistory"
                            style="-fx-background-color: #6366f1; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 8 16;"/>
                    
                    <!-- Auto-save indicator -->
                    <Label fx:id="lblAutoSaveStatus" text="âœ“ ÄÃ£ lÆ°u" 
                           style="-fx-text-fill: #10b981; -fx-font-size: 12px; -fx-padding: 8 0;"/>
                </HBox>
            </HBox>
            
            <!-- Quick Toolbar -->
            <HBox styleClass="editor-format-toolbar" alignment="CENTER_LEFT" spacing="8">
                <padding>
                    <Insets top="8" bottom="8" left="15" right="15"/>
                </padding>
                
                <Label text="ðŸ’¡ Tip: HTMLEditor cÃ³ Ä‘áº§y Ä‘á»§ cÃ´ng cá»¥ Ä‘á»‹nh dáº¡ng bÃªn trong. Bold: Ctrl+B, Italic: Ctrl+I, Underline: Ctrl+U" 
                       style="-fx-text-fill: #64748b; -fx-font-size: 12px;"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Insert Options -->
                <Button fx:id="btnInsertImage" text="ðŸ–¼ï¸ ChÃ¨n áº£nh" 
                        styleClass="toolbar-btn"
                        onAction="#handleInsertImage"/>
                
                <Separator orientation="VERTICAL"/>
                
                <!-- Word Count -->
                <Label fx:id="lblWordCount" text="0 tá»«" 
                       style="-fx-text-fill: #94a3b8; -fx-font-size: 12px;"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- Center - TabPane for Multiple Notes -->
    <center>
        <BorderPane>
            <!-- Tab Container -->
            <center>
                <TabPane fx:id="noteTabPane" 
                         tabClosingPolicy="ALL_TABS"
                         style="-fx-background-color: #f8fafc;">
                    
                    <!-- Empty state tab (shown when no notes are open) -->
                    <Tab fx:id="emptyTab" text="ChÃ o má»«ng" closable="false">
                        <VBox alignment="CENTER" spacing="20" 
                              style="-fx-padding: 50; -fx-background-color: white;">
                            <Label text="ðŸ“" style="-fx-font-size: 64px;"/>
                            <Label text="ChÃ o má»«ng Ä‘áº¿n Rich Text Editor" 
                                   style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                            <Label text="Nháº¥n '+ Ghi chÃº má»›i' Ä‘á»ƒ báº¯t Ä‘áº§u viáº¿t" 
                                   style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                            <Label text="hoáº·c chá»n má»™t ghi chÃº tá»« danh sÃ¡ch bÃªn trÃ¡i" 
                                   style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                            
                            <VBox spacing="10" alignment="CENTER" style="-fx-padding: 20 0 0 0;">
                                <Label text="âŒ¨ï¸ PhÃ­m táº¯t:" 
                                       style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #475569;"/>
                                <HBox spacing="15">
                                    <VBox spacing="5">
                                        <Label text="Ctrl + B: Bold" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                        <Label text="Ctrl + I: Italic" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                        <Label text="Ctrl + U: Underline" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                    </VBox>
                                    <VBox spacing="5">
                                        <Label text="Ctrl + S: LÆ°u" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                        <Label text="Ctrl + N: Ghi chÃº má»›i" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                        <Label text="Ctrl + W: ÄÃ³ng tab" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </VBox>
                    </Tab>
                    
                    <!-- Dynamic tabs will be added here programmatically -->
                </TabPane>
            </center>
        </BorderPane>
    </center>
    
    <!-- Bottom Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" alignment="CENTER_LEFT" spacing="15">
            <padding>
                <Insets top="8" bottom="8" left="15" right="15"/>
            </padding>
            
            <Label fx:id="lblStatus" text="Sáºµn sÃ ng" 
                   style="-fx-text-fill: #64748b; -fx-font-size: 12px;"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label fx:id="lblCurrentNote" text="ChÆ°a má»Ÿ ghi chÃº nÃ o" 
                   style="-fx-text-fill: #64748b; -fx-font-size: 12px;"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label fx:id="lblLastSaved" text="" 
                   style="-fx-text-fill: #94a3b8; -fx-font-size: 11px;"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label fx:id="lblTabCount" text="0 tab" 
                   style="-fx-text-fill: #94a3b8; -fx-font-size: 11px;"/>
        </HBox>
    </bottom>
</BorderPane>
