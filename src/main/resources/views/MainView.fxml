<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dat.notebook.controller.MainController" styleClass="main-root" stylesheets="@../css/soft-peach.css" prefWidth="1200" prefHeight="700" minWidth="900" minHeight="500">

    <!-- Sidebar -->
    <left>
        <VBox styleClass="sidebar" prefWidth="240" minWidth="200" maxWidth="300">
            <!-- Header -->
            <VBox styleClass="sidebar-header" spacing="5">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="ðŸ““" style="-fx-font-size: 28px;"/>
                    <VBox>
                        <Label text="SmartNote" styleClass="sidebar-logo"/>
                        <Label text="v1.0" styleClass="sidebar-version"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Search -->
            <HBox styleClass="input-container" alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ”" styleClass="search-icon"/>
                <TextField fx:id="txtSearch" promptText="TÃ¬m kiáº¿m..." styleClass="search-field" HBox.hgrow="ALWAYS"/>
            </HBox>

            <!-- Menu Section -->
            <Label text="KHÃ”NG GIAN LÃ€M VIá»†C" styleClass="sidebar-section-title"/>

            <VBox spacing="8">
                <Button fx:id="btnAllNotes" text="ðŸ“‹  Táº¥t cáº£ ghi chÃº" styleClass="sidebar-btn, sidebar-btn-active" onAction="#handleShowAllNotes" maxWidth="Infinity"/>

                <Button fx:id="btnFavorites" text="â­  YÃªu thÃ­ch" styleClass="sidebar-btn" onAction="#handleShowFavorites" maxWidth="Infinity"/>

                <Button fx:id="btnShared" text="ðŸ”—  ÄÃ£ chia sáº»" styleClass="sidebar-btn" onAction="#handleShowShared" maxWidth="Infinity"/>

                <Button fx:id="btnTrash" text="ðŸ—‘ï¸  ThÃ¹ng rÃ¡c" styleClass="sidebar-btn" onAction="#handleShowTrash" maxWidth="Infinity"/>
            </VBox>

            <!-- Categories Section -->
            <Label text="Dá»° ÃN" styleClass="sidebar-section-title"/>

            <VBox fx:id="categoriesContainer" spacing="5">
                <!-- Dynamic categories will be added here -->
            </VBox>

            <HBox alignment="CENTER_LEFT" spacing="5" style="-fx-padding: 5 0 0 15;">
                <Button text="+" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-background-radius: 8; -fx-font-size: 14px; -fx-padding: 5 12;" onAction="#handleAddCategory"/>
                <Label text="ThÃªm danh má»¥c" style="-fx-text-fill: rgba(255,255,255,0.7); -fx-font-size: 13px;"/>
            </HBox>

            <!-- Spacer -->
            <Region VBox.vgrow="ALWAYS"/>

            <!-- Bottom Section -->
            <VBox spacing="8">
                <Button fx:id="btnSettings" text="âš™ï¸  CÃ i Ä‘áº·t" styleClass="sidebar-btn" onAction="#handleShowSettings" maxWidth="Infinity"/>

                <!-- User Info -->
                <HBox styleClass="sidebar-user-info" alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ‘¤" style="-fx-font-size: 24px;"/>
                    <VBox>
                        <Label fx:id="userNameLabel" text="NgÆ°á»i dÃ¹ng" styleClass="sidebar-user-name"/>
                        <Label text="Pro Account" styleClass="sidebar-user-email"/>
                    </VBox>
                </HBox>
            </VBox>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <VBox styleClass="content-area">
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" spacing="20">
                <VBox HBox.hgrow="ALWAYS">
                    <Label fx:id="contentTitle" text="Ghi chÃº" styleClass="content-title"/>
                    <Label fx:id="noteCountLabel" text="0 ghi chÃº" styleClass="content-subtitle"/>
                </VBox>

                <!-- Sort ComboBox -->
                <HBox spacing="10" alignment="CENTER">
                    <Label text="Sáº¯p xáº¿p:" style="-fx-text-fill: #64748b; -fx-font-size: 13px;"/>
                    <ComboBox fx:id="sortComboBox" promptText="Sáº¯p xáº¿p" styleClass="combo-box" style="-fx-pref-width: 140px;"/>
                </HBox>
            </HBox>

            <!-- Notes Grid / List -->
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent;">
                <FlowPane fx:id="notesContainer" hgap="20" vgap="20" style="-fx-padding: 20 0;">
                    <!-- Notes will be loaded here dynamically -->
                </FlowPane>
            </ScrollPane>

            <!-- Empty State (shown when no notes) -->
            <VBox fx:id="emptyState" styleClass="empty-state" visible="false" managed="false">
                <Label text="ðŸ“" styleClass="empty-state-icon"/>
                <Label text="ChÆ°a cÃ³ ghi chÃº nÃ o" styleClass="empty-state-title"/>
                <Label text="Nháº¥n '+ Táº¡o ghi chÃº má»›i' Ä‘á»ƒ táº¡o ghi chÃº Ä‘áº§u tiÃªn" styleClass="empty-state-description"/>
            </VBox>

            <!-- Create Note Button -->
            <HBox alignment="CENTER">
                <padding>
                    <Insets top="15"/>
                </padding>
                <Button text="âœ¨  Táº¡o ghi chÃº má»›i" styleClass="btn-primary" onAction="#handleCreateNote"/>
            </HBox>
        </VBox>
    </center>

    <!-- Right Panel - Note Editor -->
    <right>
        <VBox fx:id="editorPanel" prefWidth="350" minWidth="280" maxWidth="420" styleClass="content-area" style="-fx-border-color: #e2e8f0; -fx-border-width: 0 0 0 1;">

            <!-- Editor Header -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Chá»n ghi chÃº" styleClass="content-title" style="-fx-font-size: 16px;"/>
                <Region HBox.hgrow="ALWAYS"/>

                <!-- Toolbar -->
                <HBox spacing="5">
                    <Button text="ðŸ“…" styleClass="toolbar-btn"/>
                    <Button text="ðŸ””" styleClass="toolbar-btn"/>
                </HBox>
            </HBox>

            <!-- Editor Toolbar -->
            <HBox styleClass="editor-toolbar" alignment="CENTER_LEFT" spacing="5">
                <Button text="B" styleClass="toolbar-btn" style="-fx-font-weight: bold;" onAction="#handleFormatBold"/>
                <Button text="I" styleClass="toolbar-btn" style="-fx-font-style: italic;" onAction="#handleFormatItalic"/>
                <Button text="U" styleClass="toolbar-btn" style="-fx-underline: true;" onAction="#handleFormatUnderline"/>
                <Separator orientation="VERTICAL"/>
                <Button text="â€¢" styleClass="toolbar-btn" onAction="#handleInsertBullet"/>
                <Button text="â˜" styleClass="toolbar-btn" onAction="#handleInsertCheckbox"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnEditTitle" text="âœï¸" styleClass="toolbar-btn" onAction="#handleEditTitle"/>
                <Button fx:id="btnDeleteNote" text="ðŸ—‘" styleClass="toolbar-btn" onAction="#handleDeleteNote"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnFavoriteNote" text="â­" styleClass="toolbar-btn-favorite" onAction="#handleToggleFavorite"/>
            </HBox>

            <!-- Note Editor -->
            <VBox VBox.vgrow="ALWAYS" spacing="15">
                <padding>
                    <Insets top="10"/>
                </padding>

                <TextArea fx:id="txtContent" promptText="Báº¯t Ä‘áº§u viáº¿t ghi chÃº cá»§a báº¡n..." styleClass="editor-content-area" wrapText="true" VBox.vgrow="ALWAYS"/>
            </VBox>
        </VBox>
    </right>
</BorderPane>
