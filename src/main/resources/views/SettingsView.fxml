<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dat.notebook.controller.SettingsController" styleClass="content-area" stylesheets="@../css/soft-peach.css" spacing="20" prefWidth="700" prefHeight="600">

    <padding>
        <Insets top="30" right="30" bottom="30" left="30"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <SVGPath content="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" style="-fx-fill: #FFB86C;" scaleX="1.6" scaleY="1.6"/>
        <VBox HBox.hgrow="ALWAYS">
            <Label text="CÃ i Ä‘áº·t tÃ i khoáº£n" styleClass="content-title"/>
            <Label text="Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n cá»§a báº¡n" styleClass="content-subtitle"/>
        </VBox>
    </HBox>

    <!-- Success/Error Notification -->
    <HBox fx:id="notificationBox" managed="false" visible="false" styleClass="notification-box" alignment="CENTER_LEFT" spacing="10">
        <Label fx:id="notificationIcon" style="-fx-font-size: 18px;"/>
        <Label fx:id="notificationLabel" wrapText="true" HBox.hgrow="ALWAYS"/>
    </HBox>

    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent;">
        <VBox spacing="25">

            <!-- Profile Info Section -->
            <VBox styleClass="settings-container" spacing="15">
            <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ‘¤" styleClass="settings-section-icon" style="-fx-alignment: CENTER; -fx-min-width: 32;"/>
                    <Label text="ThÃ´ng tin cÃ¡ nhÃ¢n" styleClass="settings-section-title"/>
                </HBox>

                <!-- Display Name Field -->
                <VBox spacing="8">
                    <Label text="TÃªn hiá»ƒn thá»‹" styleClass="settings-item-label"/>
                    <TextField fx:id="txtDisplayName" promptText="Nháº­p tÃªn hiá»ƒn thá»‹ cá»§a báº¡n" styleClass="text-field-fresh" prefWidth="400"/>
                    <Label text="TÃªn nÃ y sáº½ hiá»ƒn thá»‹ trong á»©ng dá»¥ng" style="-fx-font-size: 12px; -fx-text-fill: #718096;"/>
                </VBox>

                <!-- Email Field -->
                <VBox spacing="8">
                    <Label text="Email" styleClass="settings-item-label"/>
                    <TextField fx:id="txtEmail" promptText="email@example.com" styleClass="text-field-fresh" prefWidth="400"/>
                    <Label text="Email dÃ¹ng cho khÃ´i phá»¥c tÃ i khoáº£n" style="-fx-font-size: 12px; -fx-text-fill: #718096;"/>
                </VBox>

                <!-- Username (Read-only) -->
                <VBox spacing="8">
                    <Label text="TÃªn Ä‘Äƒng nháº­p" styleClass="settings-item-label"/>
                    <TextField fx:id="txtUsername" editable="false" styleClass="text-field-fresh" prefWidth="400" style="-fx-opacity: 0.6;"/>
                    <Label text="TÃªn Ä‘Äƒng nháº­p khÃ´ng thá»ƒ thay Ä‘á»•i" style="-fx-font-size: 12px; -fx-text-fill: #a0aec0;"/>
                </VBox>

                <!-- Save Profile Button -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button text="ðŸ’¾ LÆ°u thay Ä‘á»•i" styleClass="btn-primary" onAction="#handleUpdateProfile"/>
                    <Label fx:id="profileStatusLabel" style="-fx-font-size: 13px; -fx-text-fill: #48bb78;"/>
                </HBox>
            </VBox>

            <!-- Change Password Section -->
            <VBox styleClass="settings-container" spacing="15">
            <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸ”‘" styleClass="settings-section-icon" style="-fx-alignment: CENTER; -fx-min-width: 32;"/>
                    <Label text="Äá»•i máº­t kháº©u" styleClass="settings-section-title"/>
                </HBox>

                <!-- Old Password -->
                <VBox spacing="8">
                    <Label text="Máº­t kháº©u hiá»‡n táº¡i" styleClass="settings-item-label"/>
                    <PasswordField fx:id="txtOldPassword" promptText="Nháº­p máº­t kháº©u hiá»‡n táº¡i" styleClass="text-field-fresh" prefWidth="400"/>
                </VBox>

                <!-- New Password -->
                <VBox spacing="8">
                    <Label text="Máº­t kháº©u má»›i" styleClass="settings-item-label"/>
                    <PasswordField fx:id="txtNewPassword" promptText="Nháº­p máº­t kháº©u má»›i (tá»‘i thiá»ƒu 6 kÃ½ tá»±)" styleClass="text-field-fresh" prefWidth="400"/>
                </VBox>

                <!-- Confirm New Password -->
                <VBox spacing="8">
                    <Label text="XÃ¡c nháº­n máº­t kháº©u má»›i" styleClass="settings-item-label"/>
                    <PasswordField fx:id="txtConfirmPassword" promptText="Nháº­p láº¡i máº­t kháº©u má»›i" styleClass="text-field-fresh" prefWidth="400"/>
                </VBox>

                <!-- Change Password Button -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button text="ðŸ”’ Äá»•i máº­t kháº©u" styleClass="btn-warning" onAction="#handleChangePassword"/>
                    <Label fx:id="passwordStatusLabel" style="-fx-font-size: 13px; -fx-text-fill: #48bb78;"/>
                </HBox>
            </VBox>

            <!-- Account Actions Section -->
            <VBox styleClass="settings-container" spacing="15">
            <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="ðŸšª" styleClass="settings-section-icon" style="-fx-alignment: CENTER; -fx-min-width: 32;"/>
                    <Label text="HÃ nh Ä‘á»™ng tÃ i khoáº£n" styleClass="settings-section-title"/>
                </HBox>

                <VBox spacing="12">
                    <Button text="ðŸšª ÄÄƒng xuáº¥t" styleClass="btn-danger" maxWidth="250" onAction="#handleLogout"/>
                </VBox>
            </VBox>

            <!-- About Section -->
            <VBox styleClass="settings-container" spacing="10" alignment="CENTER">
                <Label text="ðŸ““ Smart Notebook" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #4a5568;"/>
                <Label text="Version 1.0.0 - Fresh Candy Theme" style="-fx-font-size: 13px; -fx-text-fill: #a0aec0;"/>
                <Label text="Made with ðŸ’œ for your ideas" style="-fx-font-size: 13px; -fx-text-fill: #a0aec0;"/>
            </VBox>

        </VBox>
    </ScrollPane>
</VBox>
